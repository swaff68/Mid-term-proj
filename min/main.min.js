var cargoLoad=3e3,weightCounter=0,waterContributionCount=0,mealsContributionCount=0,fuelContributionCount=0,waterNeeded=0,mealsNeeded=0,fuelNeeded=0,supplyArray=[],orgsArray=[],SupplyInput=function(t,e,n){this.name=t,this.qty=e,this.weight=n},contributionArray=[],ContributionInput=function(t,e,n,o){this.org=t,this.sType=e,this.qty=n,this.weight=o},contributionStatus=function(t,e,n){.5>=n/e?t.addClass("red"):.8>=n/e&&n/e>=.51?(t.removeClass("red"),t.addClass("redYellow")):.99>=n/e&&n/e>=.81?(t.removeClass("red"),t.removeClass("redYellow"),t.addClass("yellowGreen")):1>=n/e&&(t.removeClass("red"),t.removeClass("redYellow"),t.removeClass("yellowGreen"),t.addClass("green"))};$(document).on("ready",function(){$(".btn-manager").click(function(){$(".btn-needed-supply").show(),$(".btn-contributed-supply").hide()}),$(".btn-contributor").click(function(){$(".btn-needed-supply").hide(),$(".btn-contributed-supply").show(),$(".supply-status").show()}),$(".btn-needed-supply").click(function(){$("#supply-form").show(),$(".btn-needed-supply").hide()}),$(".btn-contributed-supply").click(function(){$("#contribution-form").show(),$(".btn-contributed-supply").hide(),$("#supply-form").remove(),$("#supplyType").append('<option class="bottles">Bottles of Water</option>'),$("#supplyType").append('<option class="meals1">Meals</option>'),$("#supplyType").append('<option class="liters1">Liters of Fuel</option>')}),$(".form-cancel").click(function(t){t.preventDefault(),$("#supply-form").hide(),$(".btn-needed-supply").show()}),$(".form-cancel1").click(function(t){t.preventDefault(),$("#contribution-form").hide(),$(".btn-contributed-supply").show()}),$(document).on("click",".form-submit",function(){$(".plane").remove(),$(".supply-status").show();var t=$("#supplyType").val();console.log(t);var e=$("#inputQuantity").val();$("#inputQuantity").val(""),console.log(e);var n=$("#inputWeight").val();if($("#inputWeight").val(""),console.log(n),weightCounter+=n*e,console.log(weightCounter),"Bottles of Water"===t?(waterNeeded=e,$(".supply-status").append('<div class=" icons col-lg-3 text-center water" data-type="water" data-qty='+e+" data-weight="+n+'><p class="icon-text">'+e+' Bottles of Water</p><button type="button" class="btn btn-supplies-needed btn-water btn-default btn-lg"><span class="glyphicon glyphicon-tint"></span><p class="remove"> x </p></button><p class="contributionsText">'+waterContributionCount+" Total Contributions</p> </div>"),$(".contGrid").append('<div class=" icons col-lg-2 text-center water" data-type="water" data-qty='+e+" data-weight="+n+'><p class="icon-text"> Bottles of Water</p><button type="button" class="btn btn-supplies-needed btn-water btn-default btn-lg"><span class="glyphicon glyphicon-tint"></span></button> </div>'),$(".bottles").remove()):"Liters of Fuel"===t?(fuelNeeded=e,$(".supply-status").append('<div class=" icons col-lg-3 text-center fuel" data-type="fuel" data-qty='+e+" data-weight="+n+'><p class="icon-text">'+e+'  Liters of Fuel</p><button type="button" class="btn btn-supplies-needed btn-fuel btn-default btn-lg"><span class="glyphicon glyphicon-tint liters"></span><p class="remove"> x </p></button><p class="contributionsText">'+fuelContributionCount+" Total Contributions</p></div>"),$(".contGrid").append('<div class=" icons col-lg-2 text-center fuel" data-type="fuel" data-qty='+e+" data-weight="+n+'><p class="icon-text">Liters of Fuel</p><button type="button" class="btn btn-supplies-needed btn-fuel btn-default btn-lg"><span class="glyphicon glyphicon-tint liters"></span></button></div>'),$(".liters1").remove()):"Meals"===t&&(mealsNeeded=e,$(".supply-status").append('<div  class=" icons col-lg-3 text-center meals" data-type="meal" data-qty='+e+" data-weight="+n+'><p class="icon-text">'+e+' Meals</p><button type="button" class="btn btn-supplies-needed btn-meals btn-default btn-lg"><span class="glyphicon glyphicon-cutlery"></span><p class="remove"> x </p></button><p class="contributionsText">'+mealsContributionCount+" Total Contributions</p></div>"),$(".contGrid").append('<div  class=" icons col-lg-2 text-center meals" data-type="meal" data-qty='+e+" data-weight="+n+'><p class="icon-text">Meals</p><button type="button" class="btn btn-supplies-needed btn-meals btn-default btn-lg"><span class="glyphicon glyphicon-cutlery"></span></button></div>'),$(".meals1").remove()),weightCounter>=cargoLoad){var o=Math.floor(weightCounter/cargoLoad);$(".supply-status").append('<div class=" icons col-lg-3 text-center plane"><button type="button" class="btn btn-supplies-needed btn-default btn-lg"><span class="glyphicon glyphicon-plane"></span></button><p class="icon-text plane-text">'+o+" Flights Required</p></div>"),console.log(o)}return!1}),$(document).on("click",".form-submit1",function(t){t.preventDefault();var e=$("#inputOrg").val(),n=$("#supplyType").val();console.log(name);var o=+$("#inputQuantity1").val();$("#inputQuantity1").val(""),console.log(o);var s=$("#inputWeight1").val();$("#inputWeight1").val(""),console.log(s);var l={};_.where(orgsArray,{name:e}).length?l=_.where(orgsArray,{name:e})[0]:(l={name:e,waterContributed:0,mealsContributed:0,fuelContributed:0},orgsArray.push(l)),"Bottles of Water"===n?(l.waterContributed+=o,waterContributionCount+=+o,$(".water .contributionsText").text(waterContributionCount+" Total Contributions"),$icon=$(".btn-water"),contributionStatus($icon,waterNeeded,waterContributionCount)):"Liters of Fuel"===n?(l.fuelContributed+=o,fuelContributionCount+=+o,$(".fuel .contributionsText").text(fuelContributionCount+" Total Contributions"),$icon=$(".btn-fuel"),contributionStatus($icon,fuelNeeded,fuelContributionCount)):"Meals"===n&&(l.mealsContributed+=o,mealsContributionCount+=+o,$(".meals .contributionsText").text(mealsContributionCount+" Total Contributions"),$icon=$(".btn-meals"),contributionStatus($icon,mealsNeeded,mealsContributionCount)),console.log(weightCounter);for(var a=0;a<orgsArray.length;a++)$(".orgContribution").empty(),$(".orgContribution").append('<div class="row"><div class="col-lg-2">'+orgsArray[a].name+'</div><div class="col-lg-2">Total #</div><div class="col-lg-2 qtyWater">'+orgsArray[a].waterContributed+'</div><div class="col-lg-2 qtyFuel">'+orgsArray[a].fuelContributed+'</div><div class="col-lg-2 qtyMeals">'+orgsArray[a].mealsContributed+"</div></div>")}),$(document).on("click",".remove",function(){$(".plane").remove();var t=$(this).closest(".icons").attr("data-type");"water"===t?$("#supplyType").append('<option class="bottles">Bottles of Water</option>'):"meal"===t?$("#supplyType").append('<option class="meals1">Meals</option>'):"fuel"===t&&$("#supplyType").append('<option class="liters1">Liters of Fuel</option>'),$(".supply-status").children().length<=2&&$(".supply-status").hide();var e=$(this).closest(".icons").attr("data-qty"),n=$(this).closest(".icons").attr("data-weight");if($(this).closest(".icons").remove(),console.log(e,n),weightCounter-=e*n,weightCounter>=cargoLoad){var o=Math.floor(weightCounter/cargoLoad);$(".supply-status").append('<div class=" icons col-lg-3 text-center plane"><button type="button" class="btn btn-supplies-needed btn-default btn-lg"><span class="glyphicon glyphicon-plane"></span></button><p class="icon-text">'+o+" Flights Required <br> Every 30 days</p></div>"),console.log(o)}})});